!function(){"use strict";angular.module("dbaq.ionCoverHeader",[]).directive("ionCoverHeader",["$document","$timeout","$ionicScrollDelegate",function(e,o,n){var r=function(e,o){var n=getComputedStyle(e).getPropertyValue("background-color"),r=/rgba?\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*\d+[\.\d+]*)*\)/g.exec(n);e.style.backgroundColor="rgba("+[r[1],r[2],r[3],o].join(",")+")"},t=function(e,o,n,t){var i=1-Math.min(n,t)/n;ionic.requestAnimationFrame(function(){r(e,1-i),o&&(o.style.opacity=1-i)})},i=function(e,o,n){r(e,0),e.style.backgroundImage="none",o&&(o.style.opacity=0),n.style.top=0},l=function(e,o){return o>0?e-Math.max(0,e-o):0};return{restrict:"A",link:function(c,a,u){var d,s,y=u.ionCoverHeader||200,f=a[0].querySelector(".bar-header"),v=a[0].querySelector(".scroll-content");if(!f&&(d=e[0].querySelector(".nav-bar-container"),!d))return void console.error("ionCoverHeader - no .bar-header or .nav-bar-container element found.");if(!v)return void console.error("ionCoverHeader - no .scroll-content element found. Scroll must be enabled on your ion-content.");var b=function(e){var o=e.detail?e.detail.scrollTop:e.target?e.target.scrollTop:null;t(f,s,y,l(y,o))},g=function(e,o,n){i(e,o,n),angular.element(n).bind("scroll",b)};if(d){var m=null,p=null;c.$on("$ionicView.beforeEnter",function(){m=d.querySelector('[nav-bar="active"]'),p=d.querySelector('[nav-bar="cached"]'),f=p.querySelector(".bar-header"),s=f.querySelector(".title"),m.style.opacity=0,g(f,s,v),o(function(){s.style.opacity=0},100)}),c.$on("$ionicView.enter",function(){o(function(){n.getScrollPosition().top>0&&t(f,s,y,l(y,n.getScrollPosition().top))})}),c.$on("$ionicView.beforeLeave",function(){angular.element(v).unbind("scroll",b),m.style.opacity=1,o(function(){r(f,1),s.style.opacity=1})})}else s=f.querySelector(".title"),g(f,s,v)}}}])}();
